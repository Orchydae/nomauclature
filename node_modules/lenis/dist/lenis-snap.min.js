function v(s,e){let t;return function(...i){let n=this;clearTimeout(t),t=setTimeout(()=>{t=void 0,s.apply(n,i)},e)}}function w(s){getComputedStyle(s).position==="sticky"&&(s.style.setProperty("position","static"),s.dataset.sticky="true"),s.offsetParent&&w(s.offsetParent)}function S(s){s?.dataset?.sticky==="true"&&(s.style.removeProperty("position"),delete s.dataset.sticky),s.offsetParent&&S(s.offsetParent)}function y(s,e=0){let t=e+s.offsetTop;return s.offsetParent?y(s.offsetParent,t):t}function T(s,e=0){let t=e+s.offsetLeft;return s.offsetParent?T(s.offsetParent,t):t}function g(s,e=0){let t=e+s.scrollTop;return s.offsetParent?g(s.offsetParent,t):t+window.scrollY}function E(s,e=0){let t=e+s.scrollLeft;return s.offsetParent?E(s.offsetParent,t):t+window.scrollX}var l=class{element;options;align;rect={};wrapperResizeObserver;resizeObserver;constructor(e,{align:t=["start"],ignoreSticky:i=!0,ignoreTransform:n=!1}={}){this.element=e,this.options={align:t,ignoreSticky:i,ignoreTransform:n},this.align=[t].flat(),this.wrapperResizeObserver=new ResizeObserver(this.onWrapperResize),this.wrapperResizeObserver.observe(document.body),this.onWrapperResize(),this.resizeObserver=new ResizeObserver(this.onResize),this.resizeObserver.observe(this.element),this.setRect({width:this.element.offsetWidth,height:this.element.offsetHeight})}destroy(){this.wrapperResizeObserver.disconnect(),this.resizeObserver.disconnect()}setRect({top:e,left:t,width:i,height:n,element:r}={}){e=e??this.rect.top,t=t??this.rect.left,i=i??this.rect.width,n=n??this.rect.height,r=r??this.rect.element,!(e===this.rect.top&&t===this.rect.left&&i===this.rect.width&&n===this.rect.height&&r===this.rect.element)&&(this.rect.top=e,this.rect.y=e,this.rect.width=i,this.rect.height=n,this.rect.left=t,this.rect.x=t,this.rect.bottom=e+n,this.rect.right=t+i)}onWrapperResize=()=>{let e,t;if(this.options.ignoreSticky&&w(this.element),this.options.ignoreTransform)e=y(this.element),t=T(this.element);else{let i=this.element.getBoundingClientRect();e=i.top+g(this.element),t=i.left+E(this.element)}this.options.ignoreSticky&&S(this.element),this.setRect({top:e,left:t})};onResize=([e])=>{if(!e?.borderBoxSize[0])return;let t=e.borderBoxSize[0].inlineSize,i=e.borderBoxSize[0].blockSize;this.setRect({width:t,height:i})}};var M=0;function b(){return M++}var f=class{constructor(e,{type:t="mandatory",lerp:i,easing:n,duration:r,velocityThreshold:a=1,debounce:c=0,onSnapStart:h,onSnapComplete:d}={}){this.lenis=e;this.options={type:t,lerp:i,easing:n,duration:r,velocityThreshold:a,debounce:c,onSnapStart:h,onSnapComplete:d},this.onWindowResize(),window.addEventListener("resize",this.onWindowResize,!1),this.onSnapDebounced=v(this.onSnap,this.options.debounce),this.lenis.on("scroll",this.onScroll)}options;elements=new Map;snaps=new Map;viewport={width:window.innerWidth,height:window.innerHeight};isStopped=!1;onSnapDebounced;destroy(){this.lenis.off("scroll",this.onScroll),window.removeEventListener("resize",this.onWindowResize,!1),this.elements.forEach(e=>e.destroy())}start(){this.isStopped=!1}stop(){this.isStopped=!0}add(e,t={}){let i=b();return this.snaps.set(i,{value:e,userData:t}),()=>this.remove(i)}remove(e){this.snaps.delete(e)}addElement(e,t={}){let i=b();return this.elements.set(i,new l(e,t)),()=>this.removeElement(i)}removeElement(e){this.elements.delete(e)}onWindowResize=()=>{this.viewport.width=window.innerWidth,this.viewport.height=window.innerHeight};onScroll=({lastVelocity:e,velocity:t,userData:i})=>{if(this.isStopped)return;let n=Math.abs(e)>Math.abs(t),r=Math.sign(e)!==Math.sign(t)&&t!==0;Math.abs(t)<this.options.velocityThreshold&&n&&!r&&i?.initiator!=="snap"&&this.onSnapDebounced()};onSnap=()=>{let{scroll:e,isHorizontal:t}=this.lenis;e=Math.ceil(this.lenis.scroll);let i=[...this.snaps.values()];this.elements.forEach(({rect:o,align:m})=>{let p;m.forEach(u=>{u==="start"?p=o.top:u==="center"?p=t?o.left+o.width/2-this.viewport.width/2:o.top+o.height/2-this.viewport.height/2:u==="end"&&(p=t?o.left+o.width-this.viewport.width:o.top+o.height-this.viewport.height),typeof p=="number"&&i.push({value:Math.ceil(p),userData:{}})})}),i=i.sort((o,m)=>Math.abs(o.value)-Math.abs(m.value));let n=i.findLast(({value:o})=>o<=e);n===void 0&&(n=i[0]);let r=Math.abs(e-n.value),a=i.find(({value:o})=>o>=e);a===void 0&&(a=i[i.length-1]);let c=Math.abs(e-a.value),h=r<c?n:a,d=Math.abs(e-h.value);(this.options.type==="mandatory"||this.options.type==="proximity"&&d<=(t?this.lenis.dimensions.width:this.lenis.dimensions.height))&&this.lenis.scrollTo(h.value,{lerp:this.options.lerp,easing:this.options.easing,duration:this.options.duration,userData:{initiator:"snap"},onStart:()=>{this.options.onSnapStart?.(h)},onComplete:()=>{this.options.onSnapComplete?.(h)}})}};globalThis.Snap=f;
//# sourceMappingURL=lenis-snap.min.js.map